# 🐾 波弟消消樂 (Match-3 Game)

一款以可愛貓咪（波弟）為主題的網頁版三消益智遊戲。採用 HTML5 Canvas 渲染技術，支援桌機與各種移動裝置。

## 🎮 遊戲特點
- **貓咪主題**：所有方塊均為精美的貓咪關聯圖示（貓臉、肉球 🐾、毛線球等）。
- **雙模式選擇**：
  - **經典模式**：無時間限制，輕鬆享受連鎖消除的快感。
  - **計時模式**：在 60 秒內挑戰最高分，測試反應速度。
- **手機優化**：
  - 支援觸控滑動 (Swipe) 手勢直接交換方塊。
  - 響應式佈局，自動填滿螢幕空間。
- **動態音效**：內建 Web Audio API 合成音效，隨連鎖次數提高音調，增強遊戲回饋感。
- **互動影片慶祝**：畫面下方包含動態貓咪慶祝影片，平時維持待機循環，消除成功時則自動跳轉至高潮片段。

## 🛠 技術棧
- **核心**: Vanilla JavaScript (ES Modules)
- **渲染**: HTML5 Canvas API
- **樣式**: CSS3 (具備動態漸層與響應式 Design)
- **部署**: Cloudflare Pages (支援 Wrangler CLI)

## 📌 歷史挑戰與解決方案

### 1. 棋盤填滿與紅色空白區域問題
**問題描述**：在某些螢幕比例（如橫向模式）下，棋盤兩側會出現大面積空白（紅色區域），且方塊圖示看起來偏小。
**解決方案**：
- **寬度優先原則**：修改 `renderer.js` 的 `_calcDimensions` 邏輯，不再同時被高度和寬度限制，改為以螢幕寬度為主要基準，確保棋盤水平撐滿。
- **放大補償**：因圖片素材自帶透明邊界，在 `_drawGem` 時額外實施 `1.4x` 或 `1.05x` 的繪製放大，並移除 Canvas 裁切限制，使視覺效果達到最飽滿的狀態。
- **CSS 移除硬性限制**：放寬 `.game-container` 的 `max-width` 限制，並將容器設為 `fit-content` 以避免外框溢出。

### 2. 慶祝動畫與效能平衡
**問題描述**：原本採用 `jumpCheer` 圖片動畫雖然簡單，但視覺衝擊力不足，且覆蓋在棋盤上會干擾玩家操作。
**解決方案**：
- **影片區段控制**：改用 `cheer.mp4` 影片，透過 JS 監聽 `timeupdate` 實作狀態機。平時在 1s~2.5s 循環，三消觸發後瞬間跳至 3s 播放至 8s。
- **獨立佈局區塊**：將影片從棋盤內部移至控制按鈕區下方的獨立 `.video-wrapper` 區域，解決遮擋問題並使整體視覺更飽滿。

### 3. 頂部導航與標題整合
**問題描述**：原本模式切換按鈕位於底部，且標題佔據獨立行，導致棋盤以上的空間利用率較低，且操作重心過於分散。
**解決方案**：
- **水平整合佈局**：將遊戲標題與兩個模式按鈕（左經典、右計時）整合至同一水平行。透過 Flexbox 實現對稱佈局，提升了介面的緊湊感與專業度。
- **視覺強化**：將模式按鈕高度提升至 `52px`，字體顏色統一為 `accent-cyan`，並賦予強烈的霓虹發光效果，使其在功能與視覺上都成為頂部的核心。

## 🚀 快速開始
1. 確保電腦已安裝 [Node.js](https://nodejs.org/)。
2. 使用 VS Code 的 [Live Server](https://marketplace.visualstudio.com/items?itemName=ritwickdey.LiveServer) 或以下指令開啟本機服務：
   ```bash
   python -m http.server
   ```
3. 部署至 Cloudflare：
   ```bash
   npm install -g wrangler
   wrangler login
   wrangler pages deploy .
   ```

---
*Created by [chiisen](https://github.com/chiisen) — v0.2.2*
